version: v1.0
name: Nelson (Semaphore 2.0)
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: Install prerequirements
    task:
      jobs:
      - name: apt tasks
        commands:
          - sudo apt-get update;
          - sudo apt-get -y install libopenmpi-dev;
          - sudo apt-get -y install autotools-dev;
          - sudo apt-get -y install libtool;
          - sudo apt-get -y install automake;
          - sudo apt-get -y install openmpi-bin;
          - sudo apt-get -y install gettext;
          - sudo apt-get -y install pkg-config;
          - sudo apt-get -y install cmake;
          - sudo apt-get -y install libffi-dev;
          - sudo apt-get -y install libicu-dev;
          - sudo apt-get -y install libxml2-dev;
          - sudo apt-get -y install liblapack-dev;
          - sudo apt-get -y install liblapacke-dev;
          - sudo apt-get -y install fftw3;
          - sudo apt-get -y install fftw3-dev;
          - sudo apt-get -y install libasound-dev;
          - sudo apt-get -y install portaudio19-dev;
          - sudo apt-get -y install libsndfile1-dev;
          - sudo apt-get -y install libtag1-dev;
          - sudo apt-get -y install alsa-utils;
          - sudo apt-get -y install libhdf5-dev;
          - sudo apt-get -y install hdf5-tools;
          - sudo apt-get -y install libboost-all-dev;
          - sudo apt-get -y install libmatio-dev;
          - sudo apt-get -y install qtbase5-dev qtdeclarative5-dev libqt5webkit5-dev libsqlite3-dev;
          - sudo apt-get -y install qt5-default qttools5-dev-tools;
          - sudo apt-get -y install libqt5opengl5-dev;
          - sudo apt-get -y install qtbase5-private-dev;
          - git clone https://github.com/eigenteam/eigen-git-mirror /tmp/eigen && mkdir /tmp/eigen-build && cd /tmp/eigen && git checkout 3.3.5 && cd - && cd /tmp/eigen-build && cmake . /tmp/eigen && make -j4 && sudo make install
