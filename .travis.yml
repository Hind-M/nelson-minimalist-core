# Travis: Macos

language: cpp

cache:
  directories:
    - ${TRAVIS_BUILD_DIR}/deps

matrix:
  include:

    # Ubuntu 14.04.4 LTS (Trusty Tahr)
    - os: linux
      dist: trusty
      sudo: required

    # Xcode 8.2
    - os: osx
      osx_image: xcode8.2
      sudo: required

before_install: 
  if [ "$TRAVIS_OS_NAME" == "osx" ]; then
    brew update
    brew install libffi
    brew install pkg-config libffi 
    brew link --force libffi
    brew install pkgconfig
    brew install icu4c
    brew link icu4c —-force
    brew install gettext
    brew link gettext -—force
    brew install boost
    brew install libxml2
    brew install cmake
    brew install qt5
  fi
  if [ $TRAVIS_OS_NAME == linux ]; then
    sudo add-apt-repository --yes ppa:beineri/opt-qt551-trusty
    sudo apt-get update -qq
    sudo apt-get install gettext
    sudo apt-get install pkg-config
    sudo apt-get install cmake
    sudo apt-get install libffi-dev
    sudo apt-get install libicu-dev
    sudo apt-get install libxml2-dev
    sudo apt-get -y install qt55base
    sudo apt-get -y install qt55tools
  fi

install:
  - if [ $TRAVIS_OS_NAME == linux ]; then hg clone https://bitbucket.org/eigen/eigen#3.3 /tmp/eigen && mkdir /tmp/eigen-build && cd /tmp/eigen-build && cmake . /tmp/eigen && make && sudo make install && cd -; fi
  - if [ $TRAVIS_OS_NAME == osx ]; then hg clone https://bitbucket.org/eigen/eigen#3.3 /tmp/eigen && mkdir /tmp/eigen-build && cd /tmp/eigen-build && cmake . /tmp/eigen && make && sudo make install && cd -; fi
